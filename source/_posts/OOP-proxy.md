title: 代理模式
date: 2017-12-24 22:22:45
tags: [OOP,JavaScript]
categories: [OOP]
---
&emsp;&emsp;**代理模式（Proxy）**：由于一个对象不能直接引用另一个对象，所以需要通过迭代对象在两个对象之间起到中介的作用。    
&emsp;&emsp;实际的编程中， 因为性能问题使用代理模式的机会是非常多的。比如频繁的访问dom节点, 频繁的请求远程资源. 可以把操作先存到一个缓冲区, 然后自己选择真正的触发时机。    
&emsp;&emsp;还有个例子就是在调用ajax请求的时候，无论是各种开源库，还是自己写的Ajax类, 都会给xhr对象设置一个代理. 我们不可能频繁的去操作xhr对象发请求, 而应该是这样。    
```js
var request = Ajax.get( 'cgi.xx.com/xxx' );
request.send();
request.done(function(){
    // do something
});
```

&emsp;&emsp; 代理对象可以完全解决被代理对象与外界对象之间的耦合，当然从被代理的页面角度来看是一种保护代理，而从服务器角度来看是一种远程代理。除了上述的几种应用外，还有以下一些常用的应用场景：
1. 跨域问题的解决；
2. 有时对对象的实例化对资源的开销非常大，如页面加载初期加载文件有很多，此时能够延迟加在一些图片对于页面首屏渲染时间的的收益是非常大的；
3. 图片预览界面，先加载预览图片，点击后再加载原图的动作等。

